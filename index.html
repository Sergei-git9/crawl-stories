<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CRAWL.STORIES ‚Äî —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>

  <style>
    :root {
      --bg: #020205;
      --accent: #FFE81F;
      --muted: #9aa0a6;
      --card: #0b0b0f;
      --font: "Courier New", monospace;
      --header-height: 70px;
    }

    * { box-sizing: border-box; }
    html, body { height:100%; margin:0; background: var(--bg); color:#fff; font-family: var(--font); -webkit-font-smoothing: antialiased; }

    header { height: var(--header-height); border-bottom:1px solid rgba(255,255,255,0.03); background: linear-gradient(180deg, rgba(2,2,5,0.95), transparent); backdrop-filter:blur(10px); position: sticky; top:0; z-index:100; }
    .header-content { display:flex; align-items:center; justify-content:space-between; padding:0 20px; height:100%; max-width:1400px; margin:0 auto; }
    header h1 { margin:0; font-size:20px; color:var(--accent); letter-spacing:1px; text-shadow:0 0 6px rgba(255,232,31,0.5); }

    .main-nav { display:flex; gap:15px; flex:1; justify-content:center; overflow-x:auto; }
    .nav-btn { background:transparent; border:1px solid rgba(255,255,255,0.1); color:var(--muted); padding:8px 16px; border-radius:20px; cursor:pointer; transition:all 0.3s ease; font-size:14px; white-space:nowrap; }
    .nav-btn:hover, .nav-btn.active { background:var(--accent); color:var(--bg); border-color:var(--accent); box-shadow:0 0 15px rgba(255,232,31,0.4); }

    .btn-admin { background:var(--accent); color:var(--bg); border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-weight:bold; font-size:14px; }

    .main-content { max-width:1400px; margin:0 auto; padding:20px; display:flex; flex-direction:column; gap:30px; }

    .player-section { display:flex; flex-direction:column; gap:15px; }
    .stage { position:relative; overflow:hidden; height:50vh; min-height:400px; border-radius:15px; background: linear-gradient(180deg,#000,#05050a); border:1px solid rgba(255,255,255,0.05); }
    #stars { position:absolute; inset:0; z-index:0; pointer-events:none; }
    .star { position:absolute; background:#fff; border-radius:50%; pointer-events:none; }

    .scene { position:absolute; inset:0; display:flex; align-items:flex-end; justify-content:center; perspective:900px; z-index:2; pointer-events:none; }
    .crawl-wrap { width:90%; max-width:1000px; pointer-events:none; transform-origin:center bottom; }
    pre.crawl { white-space:pre; line-height:1.3; text-align:center; font-size:clamp(16px,2.5vw,24px); color:var(--accent); margin:0; padding:30px 20px; pointer-events:none; text-shadow:0 0 10px rgba(255,232,31,0.5); }

    .player-controls-panel { display:flex; justify-content:space-between; align-items:center; padding:15px 20px; background:var(--card); border-radius:10px; border:1px solid rgba(255,255,255,0.03); }
    .control-btn { background:transparent; border:1px solid rgba(255,255,255,0.1); color:var(--accent); padding:10px 20px; border-radius:8px; cursor:pointer; transition:all 0.3s ease; font-size:14px; }
    .control-btn:hover { background: rgba(255,232,31,0.1); border-color: var(--accent); transform:translateY(-2px); }

    .controls-left, .controls-right { display:flex; align-items:center; gap:10px; }
    .speed-label { color:var(--muted); font-size:14px; }
    .speed-value { color:var(--accent); font-size:14px; min-width:30px; }
    input[type=range] { width:120px; height:4px; background: rgba(255,255,255,0.1); border-radius:2px; outline:none; -webkit-appearance:none; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; width:16px; height:16px; background:var(--accent); border-radius:50%; cursor:pointer; }

    .stories-section { margin-top:20px; }
    .section-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .section-header h2 { margin:0; color:var(--accent); font-size:24px; text-shadow:0 0 5px rgba(255,232,31,0.4); }
    .stories-count { color:var(--muted); font-size:14px; }

    .stories-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:20px; }
    .story-card { background: linear-gradient(180deg,var(--card),#07070a); border-radius:12px; padding:20px; border:1px solid rgba(255,255,255,0.03); cursor:pointer; transition:all 0.3s ease; position:relative; overflow:hidden; }
    .story-card:hover { transform:translateY(-5px); border-color:rgba(255,232,31,0.2); box-shadow:0 10px 30px rgba(255,232,31,0.1); }
    .story-card.blocked { cursor:not-allowed; opacity:0.7; }
    .story-card.blocked:hover { transform:none; border-color:rgba(255,255,255,0.03); box-shadow:none; }

    .story-header { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:10px; }
    .story-title { margin:0; color:var(--accent); font-size:18px; line-height:1.3; flex:1; text-shadow:0 0 6px rgba(255,232,31,0.4); }
    .story-badge { background: rgba(255,232,31,0.1); color:var(--accent); padding:4px 8px; border-radius:12px; font-size:11px; font-weight:bold; margin-left:10px; white-space:nowrap; }
    .story-badge.scheduled { background: rgba(255,193,7,0.1); color:#ffc107; }
    .story-badge.soon { background: rgba(158,158,158,0.1); color:#9e9e9e; }

    .story-desc { color:var(--muted); font-size:14px; line-height:1.4; margin-bottom:15px; }

    .blocked-overlay { position:absolute; top:0; left:0; right:0; bottom:0; background: rgba(2,2,5,0.8); display:flex; align-items:center; justify-content:center; opacity:0; transition:opacity 0.3s ease; backdrop-filter:blur(2px); }
    .story-card.blocked:hover .blocked-overlay { opacity:1; }
    .blocked-message { text-align:center; padding:20px; color:var(--accent); }

    .countdown-bar { height:4px; background: rgba(255,255,255,0.1); border-radius:2px; margin-top:10px; overflow:hidden; }
    .countdown-progress { height:100%; background: linear-gradient(90deg,#ffc107,#ff9800); border-radius:2px; animation:pulse 2s infinite; }

    @keyframes crawl { 0% { transform: translateY(120vh) rotateX(20deg) scale(1); opacity:1; } 100% { transform: translateY(-260vh) rotateX(20deg) scale(0.36); opacity:0; } }
    @keyframes pulse { 0%{opacity:0.7;}50%{opacity:1;}100%{opacity:0.7;} }

    @media(max-width:768px){ :root {--header-height:60px;} .header-content{padding:0 15px;} header h1{font-size:16px;} .main-nav{gap:8px; padding:10px 0; justify-content:flex-start;} .nav-btn{padding:6px 12px; font-size:12px;} .btn-admin{padding:6px 12px; font-size:12px;} .main-content{padding:15px; gap:20px;} .stage{height:40vh; min-height:300px; border-radius:10px;} pre.crawl{padding:20px 15px; font-size:16px;} .player-controls-panel{flex-direction:column; gap:15px; padding:15px;} .controls-left,.controls-right{width:100%; justify-content:center;} .stories-grid{grid-template-columns:1fr; gap:15px;} .section-header{flex-direction:column; align-items:flex-start; gap:10px;} .section-header h2{font-size:20px;} .story-card{padding:15px;} .story-header{flex-direction:column; gap:8px;} .story-badge{align-self:flex-start; margin-left:0;} }
  </style>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyANC4K0-xI-9SvrpoiOp4v-N2XLvCQCALg",
      authDomain: "crawl-stories.firebaseapp.com",
      projectId: "crawl-stories",
      storageBucket: "crawl-stories.firebasestorage.app",
      messagingSenderId: "886479757650",
      appId: "1:886479757650:web:194ad1dd2d02c959bdda8b",
      measurementId: "G-SGC2HF0455"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    console.log('üî• Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
  </script>
</head>
<body>
  <div id="mainApp">
    <header>
      <div class="header-content">
        <h1>üé¨ CRAWL.STORIES</h1>
        <nav class="main-nav" id="mainNav"></nav>
        <div class="header-controls">
          <button id="btnAdmin" class="btn-admin">‚öôÔ∏è –ê–¥–º–∏–Ω</button>
        </div>
      </div>
    </header>

    <main class="main-content">
      <section class="player-section">
        <div id="stage" class="stage">
          <div id="stars"></div>
          <div class="scene">
            <div class="crawl-wrap">
              <pre id="crawl" class="crawl">–í—ã–±–µ—Ä–∏ –∏—Å—Ç–æ—Ä–∏—é –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ</pre>
            </div>
          </div>
        </div>

        <div class="player-controls-panel">
          <div class="controls-left">
            <button id="play" class="control-btn">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç</button>
            <button id="pause" class="control-btn">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
            <button id="reset" class="control-btn">üîÑ –°–±—Ä–æ—Å</button>
          </div>
          <div class="controls-right">
            <label class="speed-label">–°–∫–æ—Ä–æ—Å—Ç—å:</label>
            <input id="speed" type="range" min="0.25" max="2.2" step="0.05" value="1">
            <span id="speedValue" class="speed-value">1x</span>
          </div>
        </div>
      </section>

      <section class="stories-section">
        <div class="section-header">
          <h2 id="currentCategoryTitle">–í—Å–µ –∏—Å—Ç–æ—Ä–∏–∏</h2>
          <div class="stories-count" id="storiesCount">0 –∏—Å—Ç–æ—Ä–∏–π</div>
        </div>
        <div id="storiesList" class="stories-grid"></div>
      </section>
    </main>
  </div>

  <script src="/mnt/data/index_1.html"></script>
</body>
</html>
